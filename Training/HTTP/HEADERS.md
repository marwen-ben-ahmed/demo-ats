# Guide Complet des En-t√™tes HTTP avec Symfony 7

## üéØ Astuce : Test mental rapide

**Question magique √† se poser** : *"Est-ce que cet en-t√™te d√©crit le MESSAGE ou l'EXP√âDITEUR ?"*

### R√®gle d'or :
- **MESSAGE** ‚Üí ‚úÖ **Identique** (Content-Type, Date, Cache-Control...)
- **EXP√âDITEUR** ‚Üí ‚ùå **Non identique** (User-Agent, Server, Authorization...)

## üìö Fiche de r√©vision ultracompacte

### ‚úÖ IDENTIQUES (11 en-t√™tes principaux)

```
CONTENT-* (Type, Length, Encoding, Language)
CACHE-Control
CONNECTION  
DATE
VIA
WARNING
PRAGMA
TRANSFER-Encoding
UPGRADE
```

### ‚ùå NON-IDENTIQUES

**Request only** : Accept-*, Authorization, Cookie, Host, User-Agent, Referer, Origin, If-*

**Response only** : Set-Cookie, Location, Server, WWW-Authenticate, ETag, Last-Modified, Expires

### Exemples d'application :
| En-t√™te | Question | R√©ponse | Conclusion |
|---------|----------|---------|------------|
| Content-Type | "D√©crit le message ou l'exp√©diteur ?" | Le message (JSON/HTML) | ‚úÖ Identique |
| User-Agent | "D√©crit le message ou l'exp√©diteur ?" | L'exp√©diteur (navigateur) | ‚ùå Request only |
| Cache-Control | "D√©crit le message ou l'exp√©diteur ?" | Le message (r√®gles cache) | ‚úÖ Identique |
| Authorization | "D√©crit le message ou l'exp√©diteur ?" | L'exp√©diteur (qui es-tu ?) | ‚ùå Request only |
| Set-Cookie | "D√©crit le message ou l'exp√©diteur ?" | L'exp√©diteur (serveur ordonne) | ‚ùå Response only |

---

## üìã Tableau 1 : En-t√™tes IDENTIQUES

| En-t√™te | Description FR | Description EN | Exemple Request | Exemple Response | Valeurs typiques |
|---------|----------------|----------------|----------------|------------------|------------------|
| **Content-Type** | Type MIME du contenu transmis | MIME type of transmitted content | `$request->headers->get('Content-Type')` | `$response->headers->set('Content-Type', 'application/json')` | `application/json`, `text/html; charset=utf-8`, `multipart/form-data` |
| **Content-Length** | Taille du contenu en octets | Content size in bytes | `$request->headers->get('Content-Length')` | `$response->headers->set('Content-Length', 1024)` | `1024`, `2048`, `0` |
| **Content-Encoding** | Algorithme de compression appliqu√© | Applied compression algorithm | `$request->headers->get('Content-Encoding')` | `$response->headers->set('Content-Encoding', 'gzip')` | `gzip`, `deflate`, `br` (Brotli) |
| **Content-Language** | Langue naturelle du contenu | Natural language of content | `$request->headers->get('Content-Language')` | `$response->headers->set('Content-Language', 'fr')` | `fr-FR`, `en-US`, `es-ES` |
| **Cache-Control** | Directives de mise en cache HTTP | HTTP caching directives | `$request->headers->get('Cache-Control')` | `$response->setMaxAge(3600)` | `public, max-age=3600`, `no-cache`, `private` |
| **Connection** | Gestion de la connexion TCP | TCP connection management | `$request->headers->get('Connection')` | `$response->headers->set('Connection', 'keep-alive')` | `keep-alive`, `close`, `upgrade` |
| **Date** | Horodatage de cr√©ation du message | Message creation timestamp | `$request->headers->get('Date')` | `$response->setDate(new \DateTime())` | `Wed, 04 Sep 2025 12:30:00 GMT` |
| **Via** | Cha√Æne de proxies interm√©diaires | Intermediate proxy chain | `$request->headers->get('Via')` | `$response->headers->set('Via', '1.1 proxy.com')` | `1.1 proxy1.com`, `2.0 cache.example.org` |
| **Warning** | Avertissements sur le cache ou contenu | Cache or content warnings | `$request->headers->get('Warning')` | `$response->headers->set('Warning', '199 Misc')` | `110 Response is stale`, `214 Transformation applied` |
| **Pragma** | Directives HTTP/1.0 de compatibilit√© | HTTP/1.0 compatibility directives | `$request->headers->get('Pragma')` | `$response->headers->set('Pragma', 'no-cache')` | `no-cache` (legacy) |
| **Transfer-Encoding** | Encodage de transfert des donn√©es | Data transfer encoding | `$request->headers->get('Transfer-Encoding')` | `$response->headers->set('Transfer-Encoding', 'chunked')` | `chunked`, `gzip, chunked` |

---

## üìã Tableau 2 : En-t√™tes NON-IDENTIQUES

### üîµ En-t√™tes de REQU√äTE uniquement

| En-t√™te | Description FR | Description EN | Exemple Symfony | Valeurs typiques |
|---------|----------------|----------------|-----------------|------------------|
| **Accept** | Types de contenu accept√©s par le client | Content types accepted by client | `$request->headers->get('Accept')` | `application/json`, `text/html,*/*;q=0.8` |
| **Accept-Language** | Langues pr√©f√©r√©es du client | Client preferred languages | `$request->getPreferredLanguage(['fr', 'en'])` | `fr-FR,fr;q=0.9,en;q=0.8` |
| **Accept-Encoding** | Encodages de compression accept√©s | Accepted compression encodings | `$request->headers->get('Accept-Encoding')` | `gzip, deflate, br` |
| **Accept-Charset** | Jeux de caract√®res accept√©s | Accepted character sets | `$request->headers->get('Accept-Charset')` | `utf-8,iso-8859-1;q=0.7` |
| **Authorization** | Credentials d'authentification | Authentication credentials | `$request->headers->get('Authorization')` | `Bearer eyJhbGc...`, `Basic dXNlcjpwYXNz` |
| **Cookie** | Cookies HTTP envoy√©s au serveur | HTTP cookies sent to server | `$request->cookies->get('session_id')` | `sessionid=abc123; csrf_token=xyz789` |
| **Host** | Nom d'h√¥te et port du serveur cible | Target server hostname and port | `$request->getHost()` | `example.com`, `api.site.com:8080` |
| **User-Agent** | Identification du client HTTP | HTTP client identification | `$request->headers->get('User-Agent')` | `Mozilla/5.0 (Windows NT 10.0...)` |
| **Referer** | URL de la page pr√©c√©dente | Previous page URL | `$request->headers->get('Referer')` | `https://example.com/login` |
| **If-Modified-Since** | Condition de modification temporelle | Temporal modification condition | `$request->headers->get('If-Modified-Since')` | `Wed, 01 Sep 2025 12:00:00 GMT` |
| **If-None-Match** | Condition ETag pour cache | ETag condition for caching | `$request->headers->get('If-None-Match')` | `"686897696a7c876b7e"` |
| **Range** | Plage de donn√©es demand√©e | Requested data range | `$request->headers->get('Range')` | `bytes=200-1023`, `bytes=0-499` |
| **Origin** | Origine de la requ√™te CORS | CORS request origin | `$request->headers->get('Origin')` | `https://mydomain.com` |
| **X-Requested-With** | Indicateur de requ√™te AJAX | AJAX request indicator | `$request->isXmlHttpRequest()` | `XMLHttpRequest` |

### üî¥ En-t√™tes de R√âPONSE uniquement

| En-t√™te | Description FR | Description EN | Exemple Symfony | Valeurs typiques |
|---------|----------------|----------------|-----------------|------------------|
| **Set-Cookie** | D√©finition de cookies HTTP | HTTP cookie definition | `$response->headers->setCookie(Cookie::create('name', 'value'))` | `sessionid=abc123; Path=/; HttpOnly; Secure` |
| **Location** | URL de redirection HTTP | HTTP redirection URL | `$response->headers->set('Location', '/dashboard')` | `https://example.com/dashboard`, `/relative/path` |
| **Server** | Information sur le serveur web | Web server information | `$response->headers->set('Server', 'nginx/1.18')` | `nginx/1.18.0`, `Apache/2.4.41` |
| **WWW-Authenticate** | Challenge d'authentification HTTP | HTTP authentication challenge | `$response->headers->set('WWW-Authenticate', 'Bearer realm="API"')` | `Basic realm="Protected"`, `Bearer realm="API"` |
| **ETag** | Identifiant de version de ressource | Resource version identifier | `$response->setEtag('unique-hash')` | `"686897696a7c876b7e"`, `W/"weak-etag"` |
| **Last-Modified** | Date de derni√®re modification | Last modification date | `$response->setLastModified(new \DateTime())` | `Wed, 01 Sep 2025 15:30:00 GMT` |
| **Expires** | Date d'expiration du cache | Cache expiration date | `$response->setExpires(new \DateTime('+1 day'))` | `Thu, 05 Sep 2025 12:00:00 GMT` |
| **Vary** | En-t√™tes de variation du cache | Cache variation headers | `$response->setVary(['Accept-Encoding'])` | `Accept-Encoding`, `Accept-Language, User-Agent` |
| **Content-Disposition** | Disposition du fichier t√©l√©charg√© | Downloaded file disposition | `$response->headers->set('Content-Disposition', 'attachment; filename="file.pdf"')` | `attachment; filename="report.pdf"`, `inline` |
| **X-Frame-Options** | Protection contre le clickjacking | Clickjacking protection | `$response->headers->set('X-Frame-Options', 'DENY')` | `DENY`, `SAMEORIGIN`, `ALLOW-FROM uri` |
| **Access-Control-Allow-Origin** | CORS - Origines autoris√©es | CORS - Allowed origins | `$response->headers->set('Access-Control-Allow-Origin', '*')` | `*`, `https://trusted-domain.com` |
| **Access-Control-Allow-Methods** | CORS - M√©thodes HTTP autoris√©es | CORS - Allowed HTTP methods | `$response->headers->set('Access-Control-Allow-Methods', 'GET,POST')` | `GET, POST, PUT, DELETE, OPTIONS` |
| **Strict-Transport-Security** | Politique de s√©curit√© HTTPS | HTTPS security policy | `$response->headers->set('Strict-Transport-Security', 'max-age=31536000')` | `max-age=31536000; includeSubDomains; preload` |

---

## üõ†Ô∏è Module de r√©f√©rence : Toutes les m√©thodes Symfony 7

### üì• REQU√äTE (Request) - M√©thodes de r√©cup√©ration

#### En-t√™tes g√©n√©riques
```php
// R√©cup√©ration basique avec HeaderBag
$request->headers->get('Header-Name');
$request->headers->get('Header-Name', 'default-value');

// V√©rifier l'existence
$request->headers->has('Header-Name');

// R√©cup√©rer tous les en-t√™tes
$request->headers->all();
$request->headers->all('Header-Name'); // Toutes les valeurs d'un en-t√™te multivalu√©

// R√©cup√©ration insensible √† la casse
$request->headers->get('content-type'); // √©quivalent √† Content-Type

// En-t√™tes sp√©cifiques
$request->headers->get('Content-Type');
$request->headers->get('Authorization');
$request->headers->get('User-Agent');
$request->headers->get('Accept');
$request->headers->get('Cache-Control');
```

#### M√©thodes sp√©cialis√©es Request
```php
// Host et URI
$request->getHost(); // Nom d'h√¥te uniquement
$request->getSchemeAndHttpHost(); // https://example.com
$request->getUri(); // URI compl√®te
$request->getPort(); // Port (80, 443, 8080...)

// Cookies avec ParameterBag
$request->cookies->get('cookie_name');
$request->cookies->get('cookie_name', 'default');
$request->cookies->all();
$request->cookies->has('cookie_name');

// Langue pr√©f√©r√©e avec n√©gociation de contenu
$request->getPreferredLanguage(['fr', 'en', 'es']);
$request->getLanguages(); // Toutes les langues par ordre de pr√©f√©rence

// Type de requ√™te et d√©tection
$request->isXmlHttpRequest(); // D√©tecte X-Requested-With: XMLHttpRequest
$request->getMethod(); // GET, POST, PUT, DELETE...
$request->isMethod('POST'); // V√©rification sp√©cifique

// Authentification et s√©curit√©
$request->headers->get('Authorization');
$request->getUser(); // Si Basic Auth
$request->getPassword(); // Si Basic Auth

// Conditions de cache
$request->headers->get('If-Modified-Since');
$request->headers->get('If-None-Match');
$request->headers->get('If-Match');

// CORS et origines
$request->headers->get('Origin');
$request->headers->get('Access-Control-Request-Method');
$request->headers->get('Access-Control-Request-Headers');

// Accept headers avec n√©gociation
$request->headers->get('Accept');
$request->headers->get('Accept-Language');
$request->headers->get('Accept-Encoding');
$request->headers->get('Accept-Charset');
$request->getAcceptableContentTypes(); // Parse et ordonne Accept

// Content headers
$request->headers->get('Content-Type');
$request->headers->get('Content-Length');
$request->getContentType(); // Parse le Content-Type
```

### üì§ R√âPONSE (Response) - M√©thodes de d√©finition

#### En-t√™tes g√©n√©riques avec HeaderBag
```php
// D√©finition et manipulation
$response->headers->set('Header-Name', 'value');
$response->headers->set('Header-Name', ['value1', 'value2']); // Multivalu√©
$response->headers->add('Header-Name', 'additional-value');
$response->headers->replace(['Header1' => 'value1', 'Header2' => 'value2']);

// Suppression
$response->headers->remove('Header-Name');

// V√©rification et r√©cup√©ration
$response->headers->has('Header-Name');
$response->headers->get('Header-Name');
$response->headers->all();
```

#### Content-* Headers
```php
// Content-Type avec m√©thodes sp√©cialis√©es
$response->headers->set('Content-Type', 'application/json');
$response->headers->set('Content-Type', 'text/html; charset=utf-8');

// Content-Length automatique ou manuelle
$response->headers->set('Content-Length', strlen($content));
$response->prepare($request); // Calcule automatiquement

// Content-Encoding pour compression
$response->headers->set('Content-Encoding', 'gzip');
$response->headers->set('Content-Encoding', 'br'); // Brotli

// Content-Language pour i18n
$response->headers->set('Content-Language', 'fr-FR');

// Content-Disposition pour t√©l√©chargements
$response->headers->set('Content-Disposition', 'attachment; filename="report.pdf"');
$response->headers->set('Content-Disposition', 'inline; filename="document.html"');
```

#### Cache et temps avec m√©thodes sp√©cialis√©es
```php
// Cache-Control - M√©thodes Symfony d√©di√©es
$response->setPublic(); // Cache-Control: public
$response->setPrivate(); // Cache-Control: private
$response->setMaxAge(3600); // max-age=3600
$response->setSharedMaxAge(7200); // s-maxage=7200
$response->setMustRevalidate(); // must-revalidate

// Cache-Control - Directives personnalis√©es
$response->headers->addCacheControlDirective('no-cache');
$response->headers->addCacheControlDirective('no-store');
$response->headers->addCacheControlDirective('stale-while-revalidate', 60);

// Date et temps avec DateTime
$response->setDate(new \DateTime()); // Date courante
$response->setLastModified(new \DateTime()); // Last-Modified
$response->setExpires(new \DateTime('+1 day')); // Expires
$response->setNotModified(); // 304 Not Modified

// ETag avec validation
$response->setEtag('unique-hash'); // Strong ETag
$response->setEtag('unique-hash', true); // Weak ETag: W/"unique-hash"

// Vary pour la n√©gociation de contenu
$response->setVary('Accept-Encoding');
$response->setVary(['Accept-Encoding', 'Accept-Language']);
```

#### Cookies avec Cookie class
```php
use Symfony\Component\HttpFoundation\Cookie;

// Cookie basique
$cookie = Cookie::create('name', 'value');
$response->headers->setCookie($cookie);

// Cookie avec toutes les options
$cookie = Cookie::create('session_id', 'abc123')
    ->withExpires(strtotime('+1 month'))
    ->withPath('/')
    ->withDomain('.example.com')
    ->withSecure(true) // HTTPS uniquement
    ->withHttpOnly(true) // Pas accessible en JS
    ->withSameSite('Strict'); // CSRF protection

$response->headers->setCookie($cookie);

// Supprimer un cookie
$response->headers->clearCookie('cookie_name');
$response->headers->clearCookie('cookie_name', '/', '.example.com');
```

#### Redirection
```php
// Redirection avec Location header
$response->headers->set('Location', '/dashboard');
$response->headers->set('Location', 'https://example.com/page');

// Ou utiliser RedirectResponse (recommand√©)
use Symfony\Component\HttpFoundation\RedirectResponse;
$response = new RedirectResponse('/dashboard', 302);
$response = new RedirectResponse('https://external.com', 301); // Permanent
```

#### S√©curit√© et CORS
```php
// CORS Headers
$response->headers->set('Access-Control-Allow-Origin', '*');
$response->headers->set('Access-Control-Allow-Origin', 'https://trusted.com');
$response->headers->set('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
$response->headers->set('Access-Control-Allow-Headers', 'Content-Type, Authorization, X-Requested-With');
$response->headers->set('Access-Control-Max-Age', '86400'); // 24h preflight cache
$response->headers->set('Access-Control-Allow-Credentials', 'true');

// Security Headers
$response->headers->set('Strict-Transport-Security', 'max-age=31536000; includeSubDomains; preload');
$response->headers->set('X-Frame-Options', 'DENY');
$response->headers->set('X-Frame-Options', 'SAMEORIGIN');
$response->headers->set('X-Content-Type-Options', 'nosniff');
$response->headers->set('X-XSS-Protection', '1; mode=block');
$response->headers->set('Referrer-Policy', 'strict-origin-when-cross-origin');

// Content Security Policy
$csp = "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'";
$response->headers->set('Content-Security-Policy', $csp);
```

#### Authentification
```php
// WWW-Authenticate challenges
$response->headers->set('WWW-Authenticate', 'Basic realm="Protected Area"');
$response->headers->set('WWW-Authenticate', 'Bearer realm="API", charset="UTF-8"');
$response->headers->set('WWW-Authenticate', 'Digest realm="API", qop="auth", nonce="'.uniqid().'"');
```

#### M√©tadonn√©es serveur
```php
// Informations serveur (√©viter en production)
$response->headers->set('Server', 'nginx/1.18.0');
$response->headers->set('X-Powered-By', 'Symfony 7.0');

// Headers personnalis√©s (convention X-)
$response->headers->set('X-Request-ID', uniqid());
$response->headers->set('X-Response-Time', microtime(true) - $startTime);
```

#### Connexion et transport
```php
// Connexion HTTP
$response->headers->set('Connection', 'keep-alive');
$response->headers->set('Connection', 'close');
$response->headers->set('Keep-Alive', 'timeout=5, max=1000');

// Transfer encoding
$response->headers->set('Transfer-Encoding', 'chunked');

// Via pour proxies
$response->headers->set('Via', '1.1 varnish, 2.0 nginx');

// Warnings
$response->headers->set('Warning', '110 Response is stale');
$response->headers->set('Warning', '214 Transformation applied');
```

### üîß M√©thodes utilitaires avanc√©es Symfony 7

```php
// V√©rifications avec m√©thodes sp√©cialis√©es
$request->headers->has('Authorization');
$response->headers->has('Set-Cookie');
$request->isSecure(); // HTTPS check
$request->isMethodSafe(); // GET, HEAD, OPTIONS

// R√©cup√©ration avec parsing
$contentType = $request->headers->get('Content-Type', 'text/html');
$acceptTypes = $request->getAcceptableContentTypes();
$preferredLanguage = $request->getPreferredLanguage(['fr', 'en']);

// It√©ration sur HeaderBag
foreach ($request->headers as $name => $values) {
    echo "$name: " . implode(', ', $values);
}

// Clonage et modification
$newResponse = clone $response;
$newResponse->headers->set('X-Custom', 'modified');

// Pr√©paration automatique de la r√©ponse
$response->prepare($request); // Calcule Content-Length, g√®re HEAD, etc.

// Envoi de la r√©ponse
$response->send(); // Envoie headers + contenu

// Debug et inspection
if ($request->isMethod('POST')) {
    dump($request->headers->all());
}
dump($response->headers->all());

// Validation de cache
$response->isNotModified($request); // Compare ETag et Last-Modified
$response->isCacheable(); // V√©rifie si la r√©ponse est cacheable
$response->mustRevalidate(); // V√©rifie must-revalidate

// Streaming et responses sp√©ciales
use Symfony\Component\HttpFoundation\StreamedResponse;
$streamedResponse = new StreamedResponse(function() {
    echo "Data chunk 1\n";
    flush();
    echo "Data chunk 2\n";
});
```

## ‚ö†Ô∏è AVERTISSEMENT IMPORTANT : Disponibilit√© des m√©thodes

### üì• REQU√äTE (Request) - Toujours en LECTURE SEULE
```php
// ‚úÖ TOUJOURS DISPONIBLE - HeaderBag lecture
$request->headers->get('Header-Name');
$request->headers->get('Header-Name', 'default');
$request->headers->has('Header-Name');
$request->headers->all();
$request->headers->all('Header-Name'); // Valeurs multiples

// ‚ö†Ô∏è MODIFICATION POSSIBLE mais d√©conseill√©e
// Les Request peuvent √™tre modifi√©es mais c'est une pratique dangereuse
$request->headers->set('X-Custom', 'value'); // Fonctionnel mais anti-pattern

// ‚úÖ CR√âATION de nouvelles Request (tests, sous-requ√™tes)
use Symfony\Component\HttpFoundation\Request;
$newRequest = Request::create('/path', 'GET', [], [], [], ['HTTP_ACCEPT' => 'application/json']);
```

### üì§ R√âPONSE (Response) - D√©pend du contexte

#### ‚úÖ Response que VOUS cr√©ez/contr√¥lez
```php
// Responses Symfony standards
$response = new Response();
$response = new JsonResponse($data);
$response = $this->json($data); // Dans un contr√¥leur
$response = $this->render('template.html.twig');

// ‚úÖ TOUTES les m√©thodes HeaderBag disponibles
$response->headers->get('Header-Name');           // ‚úÖ Lecture
$response->headers->has('Header-Name');           // ‚úÖ V√©rification
$response->headers->all();                        // ‚úÖ Liste compl√®te
$response->headers->set('Header-Name', 'value');  // ‚úÖ D√©finir/Remplacer
$response->headers->add('Header-Name', 'value');  // ‚úÖ Ajouter
$response->headers->remove('Header-Name');        // ‚úÖ Supprimer
$response->headers->replace($headers);            // ‚úÖ Remplacer tout
```

#### ‚ö†Ô∏è Response HTTP externe (HttpClient)
```php
use Symfony\Contracts\HttpClient\HttpClientInterface;

$httpClient->request('GET', 'https://api.example.com');
$response = $httpClient->request('GET', 'https://api.com');

// ‚úÖ M√©thodes de LECTURE via ResponseInterface
$response->getHeaders(); // Tous les headers
$response->getHeaders(false); // Sans normalisation
$response->getInfo('response_headers'); // Headers bruts

// ‚ùå Pas de m√©thodes d'√âCRITURE sur ResponseInterface
// L'objet ResponseInterface n'a pas de HeaderBag modifiable
```

### üéØ R√®gle d'or pour la certification Symfony 7

| Type d'objet | Interface | Lecture | √âcriture | Cas d'usage |
|-------------|-----------|---------|----------|-------------|
| **Request HTTP entrant** | `RequestInterface` | ‚úÖ HeaderBag complet | ‚ö†Ô∏è Possible mais d√©conseill√© | Contr√¥leurs, middleware |
| **Request cr√©√©e manuellement** | `Request` | ‚úÖ HeaderBag complet | ‚úÖ HeaderBag complet | Tests, sous-requ√™tes |
| **Response Symfony** | `Response` | ‚úÖ HeaderBag complet | ‚úÖ HeaderBag complet | Contr√¥leurs, services |
| **Response HttpClient** | `ResponseInterface` | ‚úÖ M√©thodes sp√©cialis√©es | ‚ùå Non disponible | API externes |

---

## üß™ Quiz de certification Symfony 7

### Question 1 : HeaderBag et m√©thodes
```php
// Quel code est correct pour r√©cup√©rer un header avec valeur par d√©faut ?
$request->headers->get('Accept-Language', 'en');
$request->headers->getDefault('Accept-Language', 'en');
$request->headers->fetch('Accept-Language') ?? 'en';
```

### Question 2 : Cache-Control
```php
// Comment d√©finir une r√©ponse publique avec max-age de 1 heure ?
$response->setPublic()->setMaxAge(3600);
$response->headers->set('Cache-Control', 'public, max-age=3600');
$response->setPublic() && $response->setMaxAge(3600);
```

### Question 3 : ETag
```php
// Comment cr√©er un ETag faible ?
$response->setEtag('abc123', true);
$response->setEtag('W/"abc123"');
$response->setWeakEtag('abc123');
```

**R√©ponses** :
1. `$request->headers->get('Accept-Language', 'en')` ‚úÖ
2. Les deux premi√®res sont correctes ‚úÖ (m√©thode fluide recommand√©e)
3. `$response->setEtag('abc123', true)` ‚úÖ

### üéì Points cl√©s pour la certification :

1. **HeaderBag** est l'objet central pour manipuler les en-t√™tes
2. **Request** utilise toujours des m√©thodes de lecture sur les headers
3. **Response** permet modification compl√®te via HeaderBag  
4. **Cache-Control** a des m√©thodes sp√©cialis√©es (`setPublic()`, `setMaxAge()`)
5. **Cookies** utilisent la classe `Cookie` avec m√©thodes fluides
6. **CORS** n√©cessite plusieurs headers `Access-Control-*`
7. **Content negotiation** utilise les headers `Accept-*`
8. **Security headers** sont critiques (`X-Frame-Options`, `HSTS`, `CSP`)

La cl√© du succ√®s : comprendre que Symfony 7 utilise **HeaderBag** comme abstraction unifi√©e pour tous les en-t√™tes HTTP, avec des m√©thodes sp√©cialis√©es pour les cas d'usage courants.
